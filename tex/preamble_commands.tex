%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%% Preamble: New Commands

% Hyperlink setup
%\hypersetup{
%    colorlinks=true,
%    linkcolor=blue,
%    urlcolor=red,
%    linktoc=all
%}
\hypersetup{
    colorlinks,
    citecolor=black,
    filecolor=black,
    linkcolor=blue,
    urlcolor=blue
}


\newcommand{\chgcomment}[1]{\todo[author=CHG,color=green,inline]{#1}}

\numberwithin{equation}{section}

\newcommand{\angles}[1]{\left\langle #1 \right\rangle}
\newcommand{\abs}[1]{\left| #1 \right|}

\newcommand{\parens}[1]{\left( #1 \right)}
\newcommand{\brackets}[1]{\left[ #1 \right]}
\newcommand{\braces}[1]{\left\{ #1 \right\}}
\newcommand{\ceil}[1]{\left\lceil #1 \right\rceil}
\newcommand{\floor}[1]{\left\lfloor #1 \right\rfloor}

\DeclareMathOperator{\dlog}{dlog}

\DeclareMathOperator{\Enc}{Enc}
\DeclareMathOperator{\Dec}{Dec}

\newcommand{\del}[0]{\delta}
\newcommand{\eps}[0]{\varepsilon}
\newcommand{\vphi}[0]{\varphi}
\newcommand{\N}[0]{\mathbb{N}}
\newcommand{\R}[0]{\mathbb{R}}
\newcommand{\Q}[0]{\mathbb{Q}}
\newcommand{\Z}[0]{\mathbb{Z}}
\newcommand{\C}[0]{\mathbb{C}}
\newcommand{\F}[0]{\mathbb{F}}
\newcommand{\G}[0]{\mathbb{G}}
\renewcommand{\P}[0]{\mathbb{P}} % Overwrites Paragraph symbol

\newcommand{\sk}[0]{\textrm{sk}}
\newcommand{\pk}[0]{\textrm{pk}}
\newcommand{\gsk}[0]{\textrm{gsk}}
\newcommand{\gpk}[0]{\textrm{gpk}}

\newcommand*{\Keccak}[0]{\textsc{Keccak256}}

% New definition of square root:
% it renames \sqrt as \oldsqrt
\let\oldsqrt\sqrt
% it defines the new \sqrt in terms of the old one
\def\sqrt{\mathpalette\DHLhksqrt}
\def\DHLhksqrt#1#2{%
\setbox0=\hbox{$#1\oldsqrt{#2\,}$}\dimen0=\ht0
\advance\dimen0-0.2\ht0
\setbox2=\hbox{\vrule height\ht0 depth -\dimen0}%
{\box0\lower0.4pt\box2}}



\newtheoremstyle{mythm}% name
  {12pt}%Space above
  %{3pt}%Space above
  {12pt}%Space below
  {\normalfont}%Body font
  {0pt}%Indent amount
  {\bf}% Theorem head font
  %{\itshape}% Theorem head font
  {}%Punctuation after theorem head
  %{.}%Punctuation after theorem head
  {\newline}%Space after theorem head 2
  {}%Theorem head spec (can be left empty, meaning ‘normal’)

\theoremstyle{mythm}
%\newtheorem{thm}{Theorem}[section] % number by section; can replace with chapter
\newtheorem{thm}{Theorem}
\newtheorem{cor}[thm]{Corollary}
\newtheorem{lem}[thm]{Lemma}
\newtheorem{prop}[thm]{Proposition}
\newtheorem{ax}{Axiom}
\newtheorem{problem}[thm]{Problem}
%
\theoremstyle{definition}
\newtheorem{defn}{Definition}[section] % number by section
%
\theoremstyle{remark}
\newtheorem{rem}{Remark}[section]
\newtheorem*{notation}{Notation}
%
\newtheorem{hw}[thm]{Homework}

% Hyphenation
\hyphenation{block-chain}
\hyphenation{Proposal-Timeout}
\hyphenation{Pre-Vote-Timeout}
\hyphenation{Pre-Commit-Timeout}
\hyphenation{Pending-Proposal}
\hyphenation{Proposal-Step}
\hyphenation{Pending-Pre-Vote}
\hyphenation{Pre-Vote-Nil}
\hyphenation{Pre-Vote-Nil-Step}
\hyphenation{Pre-Vote}
\hyphenation{Pre-Vote-Step}
\hyphenation{Pending-Pre-Commit}
\hyphenation{Pre-Commit-Nil}
\hyphenation{Pre-Commit-Nil-Step}
\hyphenation{Pre-Commit}
\hyphenation{Pre-Commit-Step}
\hyphenation{Pending-Next}
\hyphenation{Next-Round}
\hyphenation{Next-Round-Step}
\hyphenation{Next-Height}
\hyphenation{Next-Height-Step}
\hyphenation{Round-Jump}
\hyphenation{Height-Jump}
\hyphenation{pseudo-UTXOID}


\hyphenation{Locked-Value}
\hyphenation{Valid-Value}
\hyphenation{Round-Cer-tifi-cate}
\hyphenation{Round-Share}
\hyphenation{Dead-Block-Round}
\hyphenation{Empty-Block}

% Listings Go definition:
\lstdefinelanguage{Go}{
    morekeywords=[1]{package,import,func,type,struct,return,defer,panic,%
     recover,select,var,const,iota,},%
   morekeywords=[2]{string,uint,uint8,uint16,uint32,uint64,int,int8,int16,%
     int32,int64,bool,float32,float64,complex64,complex128,byte,rune,uintptr,%
     error,interface},%
   morekeywords=[3]{map,slice,make,new,nil,len,cap,copy,close,true,false,%
     delete,append,real,imag,complex,chan,},%
   morekeywords=[4]{for,break,continue,range,go,goto,switch,case,fallthrough,if,%
     else,default,},%
   morekeywords=[5]{Println,Printf,Error,Print,},%
   sensitive=true,%
   morecomment=[l]{//},%
   morecomment=[s]{/*}{*/},%
   morestring=[b]',%
   morestring=[b]",%
   morestring=[s]{`}{`},%
}

% Listings CapnProto definition:
\lstdefinelanguage{CapnProto}{
    morekeywords=[1]{using,import,import,func,type,struct,return,defer,panic,%
     recover,select,var,const,package},%
   morekeywords=[2]{string,},%
   morekeywords=[3]{map,slice,make,new,nil,len,cap,copy,close,true,false,%
     delete,append,real,imag,complex,chan,},%
   morekeywords=[4]{for,break,continue,range,go,goto,switch,case,fallthrough,if,%
     else,default,},%
   morekeywords=[5]{Println,Printf,Error,Print,},%
   morekeywords=[6]{@0,@1,@2,@3,@4,@5,@6,@7,},%
   sensitive=true,%
   morecomment=[l]{\#},%
   morecomment=[s]{/*}{*/},%
   morestring=[b]',%
   morestring=[b]",%
   morestring=[s]{`}{`},%
}

% Specific commands for specialized objects

\newcommand*{\LayerTwo}[0]{AliceNet}


% DKG Phases
\newcommand*{\Registration}[0]{Registration Phase}
\newcommand*{\ShareDistribution}[0]{Share Distribution Phase}
\newcommand*{\ShareDistributionDispute}[0]{Share Distribution Dispute Phase}
\newcommand*{\KeyShare}[0]{Key Share Submission Phase}
\newcommand*{\MasterPublicKey}[0]{Master Public Key Submission Phase}
\newcommand*{\GPKSubmission}[0]{Group Public Key Submission Phase}
\newcommand*{\GPKDispute}[0]{Group Public Key Dispute Phase}
\newcommand*{\Completion}[0]{DKG Completion Phase}

% Elliptic Curves
\newcommand*{\secp}[0]{{\normalfont\textsc{secp256k1}}}
\newcommand*{\bnEth}[0]{{\normalfont\textsc{BN256Eth}}}

% Application Objects
\newcommand*{\utxo}[0]{{\normalfont\textsc{utxo}}}
\newcommand*{\TxIn}[0]{{\normalfont\textsc{TxIn}}}
\newcommand*{\DataStore}[0]{{\normalfont\textsc{DataStore}}}
\newcommand*{\AtomicSwap}[0]{{\normalfont\textsc{AtomicSwap}}}
\newcommand*{\ValueStore}[0]{{\normalfont\textsc{ValueStore}}}
\newcommand*{\Fee}[0]{{\normalfont\textsc{Fee}}}
\newcommand*{\Vin}[0]{{\normalfont\textsc{Vin}}}
\newcommand*{\Vout}[0]{{\normalfont\textsc{Vout}}}
\newcommand*{\Tx}[0]{{\normalfont\textsc{Tx}}}

% Consensus Objects
